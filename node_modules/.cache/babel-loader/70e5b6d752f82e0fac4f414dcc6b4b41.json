{"ast":null,"code":"import _regeneratorRuntime from\"/Users/andrei/Desktop/diplom-project/movies-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/andrei/Desktop/diplom-project/movies-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/andrei/Desktop/diplom-project/movies-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import styled from\"./page.module.css\";import{SingleContent}from\"../Components/SingleContext/SingleContent\";import{Pagination}from\"@mui/material\";import{Genres}from\"../Components/Genres/Genres\";import{useGenre}from\"../helper/useGenre\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Movies=function Movies(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),content=_useState2[0],setContent=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),numOfPages=_useState6[0],setNumOfPages=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),genres=_useState8[0],setGenres=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),selectedGenres=_useState10[0],setSelectedGenres=_useState10[1];var genreforURL=useGenre(selectedGenres);var fetchMovies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://api.themoviedb.org/3/discover/movie?api_key=\".concat(process.env.REACT_APP_API_KEY,\"&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1&with_watch_monetization_types=flatrate&page=\").concat(page,\"&with_genres=\").concat(genreforURL));case 2:response=_context.sent;if(!response.ok){_context.next=11;break;}_context.next=6;return response.json();case 6:data=_context.sent;setContent(data.results);setNumOfPages(data.total_pages);_context.next=12;break;case 11:alert(\"error\"+response.status);case 12:case\"end\":return _context.stop();}}},_callee);}));return function fetchMovies(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchMovies();},[page,genreforURL]);var handlePageChange=function handlePageChange(e){setPage(e);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:styled.pageTitle,children:\"Movies\"}),/*#__PURE__*/_jsx(Genres,{type:\"movie\",selectedGenres:selectedGenres,setSelectedGenres:setSelectedGenres,genres:genres,setGenres:setGenres,setPage:setPage}),/*#__PURE__*/_jsx(\"div\",{className:styled.trending,children:content&&content.map(function(item){return/*#__PURE__*/_jsx(SingleContent,{id:item.id,poster:item.poster_path,title:item.title||item.name,date:item.first_air_date||item.release_date,media_type:\"movie\",vote_average:item.vote_average},item.id);})}),/*#__PURE__*/_jsx(Pagination,{onChange:function onChange(e){return handlePageChange(e.target.textContent);},count:numOfPages,color:\"primary\",hideNextButton:true,hidePrevButton:true,className:styled.pagination})]});};","map":{"version":3,"sources":["/Users/andrei/Desktop/diplom-project/movies-app/src/Pages/Movies.jsx"],"names":["React","useEffect","useState","styled","SingleContent","Pagination","Genres","useGenre","Movies","content","setContent","page","setPage","numOfPages","setNumOfPages","genres","setGenres","selectedGenres","setSelectedGenres","genreforURL","fetchMovies","fetch","process","env","REACT_APP_API_KEY","response","ok","json","data","results","total_pages","alert","status","handlePageChange","e","pageTitle","trending","map","item","id","poster_path","title","name","first_air_date","release_date","vote_average","target","textContent","pagination"],"mappings":"+eAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,OAAQC,aAAR,KAA4B,2CAA5B,CACA,OAAQC,UAAR,KAAyB,eAAzB,CACA,OAAQC,MAAR,KAAqB,6BAArB,CACA,OAAQC,QAAR,KAAuB,oBAAvB,C,wFAEA,MAAO,IAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CAExB,cAA8BN,QAAQ,CAAC,EAAD,CAAtC,wCAAOO,OAAP,eAAgBC,UAAhB,eACA,eAAwBR,QAAQ,CAAC,CAAD,CAAhC,yCAAOS,IAAP,eAAaC,OAAb,eACA,eAAoCV,QAAQ,EAA5C,yCAAOW,UAAP,eAAmBC,aAAnB,eACA,eAA4BZ,QAAQ,CAAC,EAAD,CAApC,yCAAOa,MAAP,eAAeC,SAAf,eACA,eAA4Cd,QAAQ,CAAC,EAAD,CAApD,0CAAOe,cAAP,gBAAuBC,iBAAvB,gBACA,GAAMC,CAAAA,WAAW,CAAGZ,QAAQ,CAACU,cAAD,CAA5B,CAGA,GAAMG,CAAAA,WAAW,0FAAG,2KACOC,CAAAA,KAAK,+DAAwDC,OAAO,CAACC,GAAR,CAAYC,iBAApE,+IAA2Nb,IAA3N,yBAA+OQ,WAA/O,EADZ,QACVM,QADU,mBAEZA,QAAQ,CAACC,EAFG,gDAGOD,CAAAA,QAAQ,CAACE,IAAT,EAHP,QAGNC,IAHM,eAIZlB,UAAU,CAACkB,IAAI,CAACC,OAAN,CAAV,CACAf,aAAa,CAACc,IAAI,CAACE,WAAN,CAAb,CALY,+BAOZC,KAAK,CAAC,QAAUN,QAAQ,CAACO,MAApB,CAAL,CAPY,uDAAH,kBAAXZ,CAAAA,WAAW,0CAAjB,CAWAnB,SAAS,CAAC,UAAM,CACbmB,WAAW,GACb,CAFQ,CAEN,CAACT,IAAD,CAAOQ,WAAP,CAFM,CAAT,CAIA,GAAMc,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,CAAD,CAAO,CAC5BtB,OAAO,CAACsB,CAAD,CAAP,CACH,CAFD,CAIA,mBACI,oCACI,aAAM,SAAS,CAAE/B,MAAM,CAACgC,SAAxB,oBADJ,cAEI,KAAC,MAAD,EACI,IAAI,CAAC,OADT,CAEI,cAAc,CAAElB,cAFpB,CAGI,iBAAiB,CAAEC,iBAHvB,CAII,MAAM,CAAEH,MAJZ,CAKI,SAAS,CAAEC,SALf,CAMI,OAAO,CAAEJ,OANb,EAFJ,cAUI,YAAK,SAAS,CAAET,MAAM,CAACiC,QAAvB,UAEQ3B,OAAO,EAAIA,OAAO,CAAC4B,GAAR,CAAY,SAACC,IAAD,qBACnB,KAAC,aAAD,EAEI,EAAE,CAAEA,IAAI,CAACC,EAFb,CAGI,MAAM,CAAED,IAAI,CAACE,WAHjB,CAII,KAAK,CAAEF,IAAI,CAACG,KAAL,EAAcH,IAAI,CAACI,IAJ9B,CAKI,IAAI,CAAEJ,IAAI,CAACK,cAAL,EAAuBL,IAAI,CAACM,YALtC,CAMI,UAAU,CAAC,OANf,CAOI,YAAY,CAAEN,IAAI,CAACO,YAPvB,EACSP,IAAI,CAACC,EADd,CADmB,EAAZ,CAFnB,EAVJ,cAwBI,KAAC,UAAD,EACI,QAAQ,CAAE,kBAACL,CAAD,QAAOD,CAAAA,gBAAgB,CAACC,CAAC,CAACY,MAAF,CAASC,WAAV,CAAvB,EADd,CAEI,KAAK,CAAElC,UAFX,CAGI,KAAK,CAAC,SAHV,CAII,cAAc,KAJlB,CAKI,cAAc,KALlB,CAMI,SAAS,CAAEV,MAAM,CAAC6C,UANtB,EAxBJ,GADJ,CAmCH,CAhEM","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport styled from \"./page.module.css\";\nimport {SingleContent} from \"../Components/SingleContext/SingleContent\";\nimport {Pagination} from \"@mui/material\";\nimport {Genres} from \"../Components/Genres/Genres\";\nimport {useGenre} from \"../helper/useGenre\";\n\nexport const Movies = () => {\n\n    const [content, setContent] = useState([]);\n    const [page, setPage] = useState(1);\n    const [numOfPages, setNumOfPages] = useState();\n    const [genres, setGenres] = useState([]);\n    const [selectedGenres, setSelectedGenres] = useState([]);\n    const genreforURL = useGenre(selectedGenres);\n\n\n    const fetchMovies = async () => {\n        const response = await fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${process.env.REACT_APP_API_KEY}&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1&with_watch_monetization_types=flatrate&page=${page}&with_genres=${genreforURL}`);\n        if (response.ok) {\n            const data = await response.json();\n            setContent(data.results);\n            setNumOfPages(data.total_pages);\n        } else {\n            alert(\"error\" + response.status);\n        }\n    };\n\n    useEffect(() => {\n       fetchMovies();\n    }, [page, genreforURL]);\n\n    const handlePageChange = (e) => {\n        setPage(e);\n    };\n\n    return (\n        <div>\n            <span className={styled.pageTitle}>Movies</span>\n            <Genres\n                type=\"movie\"\n                selectedGenres={selectedGenres}\n                setSelectedGenres={setSelectedGenres}\n                genres={genres}\n                setGenres={setGenres}\n                setPage={setPage}\n            />\n            <div className={styled.trending}>\n                {\n                    content && content.map((item) => (\n                        <SingleContent\n                            key={item.id}\n                            id={item.id}\n                            poster={item.poster_path}\n                            title={item.title || item.name}\n                            date={item.first_air_date || item.release_date}\n                            media_type=\"movie\"\n                            vote_average={item.vote_average}/>\n                    ))\n                }\n            </div>\n            <Pagination\n                onChange={(e) => handlePageChange(e.target.textContent)}\n                count={numOfPages}\n                color=\"primary\"\n                hideNextButton\n                hidePrevButton\n                className={styled.pagination}\n            />\n        </div>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}