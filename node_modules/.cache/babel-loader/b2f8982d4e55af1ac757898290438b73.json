{"ast":null,"code":"import _regeneratorRuntime from\"/Users/andrei/Desktop/diplom-project/movies-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/andrei/Desktop/diplom-project/movies-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/andrei/Desktop/diplom-project/movies-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{SingleContent}from\"../Components/SingleContext/SingleContent\";import styled from\"./page.module.css\";import{Pagination}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Trending=function Trending(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),content=_useState2[0],setContent=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),numOfPages=_useState6[0],setNumOfPages=_useState6[1];var fetchTrending=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://api.themoviedb.org/3/trending/all/week?api_key=\".concat(process.env.REACT_APP_API_KEY,\"&page=\").concat(page));case 2:response=_context.sent;if(!response.ok){_context.next=11;break;}_context.next=6;return response.json();case 6:data=_context.sent;setContent(data.results);setNumOfPages(data.total_pages);_context.next=12;break;case 11:alert(\"error\"+response.status);case 12:case\"end\":return _context.stop();}}},_callee);}));return function fetchTrending(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchTrending();},[page]);var handlePageChange=function handlePageChange(e){setPage(e);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:styled.pageTitle,children:\"Trending\"}),/*#__PURE__*/_jsx(\"div\",{className:styled.trending,children:content&&content.map(function(item){return/*#__PURE__*/_jsx(SingleContent,{id:item.id,poster:item.poster_path,title:item.title||item.name,date:item.first_air_date||item.release_date,media_type:item.media_type,vote_average:item.vote_average},item.id);})}),/*#__PURE__*/_jsx(Pagination,{onChange:function onChange(e){return handlePageChange(e.target.textContent);},count:numOfPages,color:\"primary\",hideNextButton:true,hidePrevButton:true,className:styled.pagination})]});};","map":{"version":3,"sources":["/Users/andrei/Desktop/diplom-project/movies-app/src/Pages/Trending.jsx"],"names":["React","useEffect","useState","SingleContent","styled","Pagination","Trending","content","setContent","page","setPage","numOfPages","setNumOfPages","fetchTrending","fetch","process","env","REACT_APP_API_KEY","response","ok","json","data","results","total_pages","alert","status","handlePageChange","e","pageTitle","trending","map","item","id","poster_path","title","name","first_air_date","release_date","media_type","vote_average","target","textContent","pagination"],"mappings":"+eAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,OAAQC,aAAR,KAA4B,2CAA5B,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,OAAQC,UAAR,KAAyB,eAAzB,C,wFAEA,MAAO,IAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CAE1B,cAA8BJ,QAAQ,CAAC,EAAD,CAAtC,wCAAOK,OAAP,eAAgBC,UAAhB,eACA,eAAwBN,QAAQ,CAAC,CAAD,CAAhC,yCAAOO,IAAP,eAAaC,OAAb,eACA,eAAoCR,QAAQ,EAA5C,yCAAOS,UAAP,eAAmBC,aAAnB,eAGA,GAAMC,CAAAA,aAAa,0FAAG,2KACKC,CAAAA,KAAK,kEAA2DC,OAAO,CAACC,GAAR,CAAYC,iBAAvE,kBAAiGR,IAAjG,EADV,QACZS,QADY,mBAEdA,QAAQ,CAACC,EAFK,gDAGKD,CAAAA,QAAQ,CAACE,IAAT,EAHL,QAGRC,IAHQ,eAIdb,UAAU,CAACa,IAAI,CAACC,OAAN,CAAV,CACAV,aAAa,CAACS,IAAI,CAACE,WAAN,CAAb,CALc,+BAOdC,KAAK,CAAC,QAAUN,QAAQ,CAACO,MAApB,CAAL,CAPc,uDAAH,kBAAbZ,CAAAA,aAAa,0CAAnB,CAWAZ,SAAS,CAAC,UAAM,CACZY,aAAa,GAChB,CAFQ,CAEN,CAACJ,IAAD,CAFM,CAAT,CAIA,GAAMiB,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,CAAD,CAAO,CAC5BjB,OAAO,CAACiB,CAAD,CAAP,CACH,CAFD,CAIA,mBACI,oCACI,aAAM,SAAS,CAAEvB,MAAM,CAACwB,SAAxB,sBADJ,cAEI,YAAK,SAAS,CAAExB,MAAM,CAACyB,QAAvB,UAEQtB,OAAO,EAAIA,OAAO,CAACuB,GAAR,CAAY,SAACC,IAAD,qBACnB,KAAC,aAAD,EAEI,EAAE,CAAEA,IAAI,CAACC,EAFb,CAGI,MAAM,CAAED,IAAI,CAACE,WAHjB,CAII,KAAK,CAAEF,IAAI,CAACG,KAAL,EAAcH,IAAI,CAACI,IAJ9B,CAKI,IAAI,CAAEJ,IAAI,CAACK,cAAL,EAAuBL,IAAI,CAACM,YALtC,CAMI,UAAU,CAAEN,IAAI,CAACO,UANrB,CAOI,YAAY,CAAEP,IAAI,CAACQ,YAPvB,EACSR,IAAI,CAACC,EADd,CADmB,EAAZ,CAFnB,EAFJ,cAgBI,KAAC,UAAD,EACI,QAAQ,CAAE,kBAACL,CAAD,QAAOD,CAAAA,gBAAgB,CAACC,CAAC,CAACa,MAAF,CAASC,WAAV,CAAvB,EADd,CAEI,KAAK,CAAE9B,UAFX,CAGI,KAAK,CAAC,SAHV,CAII,cAAc,KAJlB,CAKI,cAAc,KALlB,CAMI,SAAS,CAAEP,MAAM,CAACsC,UANtB,EAhBJ,GADJ,CA2BH,CArDM","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {SingleContent} from \"../Components/SingleContext/SingleContent\";\nimport styled from \"./page.module.css\";\nimport {Pagination} from \"@mui/material\";\n\nexport const Trending = () => {\n\n    const [content, setContent] = useState([]);\n    const [page, setPage] = useState(1);\n    const [numOfPages, setNumOfPages] = useState();\n\n\n    const fetchTrending = async () => {\n        const response = await fetch(`https://api.themoviedb.org/3/trending/all/week?api_key=${process.env.REACT_APP_API_KEY}&page=${page}`);\n        if (response.ok) {\n            const data = await response.json();\n            setContent(data.results);\n            setNumOfPages(data.total_pages);\n        } else {\n            alert(\"error\" + response.status);\n        }\n    }\n\n    useEffect(() => {\n        fetchTrending();\n    }, [page]);\n\n    const handlePageChange = (e) => {\n        setPage(e);\n    };\n\n    return (\n        <div >\n            <span className={styled.pageTitle}>Trending</span>\n            <div className={styled.trending}>\n                {\n                    content && content.map((item) => (\n                        <SingleContent\n                            key={item.id}\n                            id={item.id}\n                            poster={item.poster_path}\n                            title={item.title || item.name}\n                            date={item.first_air_date || item.release_date}\n                            media_type={item.media_type}\n                            vote_average={item.vote_average}/>\n                    ))\n                }\n            </div>\n            <Pagination\n                onChange={(e) => handlePageChange(e.target.textContent)}\n                count={numOfPages}\n                color=\"primary\"\n                hideNextButton\n                hidePrevButton\n                className={styled.pagination}\n            />\n        </div>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}